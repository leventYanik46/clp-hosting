---
import Layout from '~/layouts/PageLayout.astro';
import Content from '~/components/widgets/Content.astro';
import CallToAction from '~/components/widgets/CallToAction.astro';
import Testimonials from '~/components/widgets/Testimonials.astro';
import Steps from '~/components/widgets/Steps.astro';
import BlogLatestPosts from '~/components/widgets/BlogLatestPosts.astro';
import { getPermalink } from '~/utils/permalinks';
import data from '~/locales/en/our-team/cagatay.json';

const { metadata, profile, steps, testimonials, cta, blog } = data;

const resolveHref = (href: string) => (/^(https?:|mailto:|tel:)/.test(href) ? href : getPermalink(href));
---

<Layout metadata={metadata}>
  <Content
    id={profile.id}
    columns={profile.columns}
    image={profile.image}
  >
    <Fragment slot="content">
      <h1 class="text-4xl md:text-5xl font-bold tracking-tight sm:text-6xl mb-4">{profile.name}</h1>
      <h2 class="text-xl md:text-2xl text-gray-600 mb-6">{profile.role}</h2>
      <div class="prose prose-lg max-w-none mb-8">
        {profile.bio.map((paragraph) => (
          <Fragment>
            <p>{paragraph}</p>
            <br />
          </Fragment>
        ))}
      </div>
      <div class="flex flex-col sm:flex-row items-center gap-4 mt-8">
        {profile.actions.map((action) => (
          <a
            href={resolveHref(action.href)}
            class={action.class}
            {...(action.target ? { target: action.target } : {})}
          >
            {action.text}
          </a>
        ))}
      </div>
    </Fragment>
  </Content>

  {steps.map((section) => (
    <Steps id={section.id} title={section.title} items={section.items} classes={section.classes} />
  ))}

  <Testimonials
    title={testimonials.title}
    subtitle={testimonials.subtitle}
    testimonials={testimonials.items}
  />

  <CallToAction {...cta} />

  <BlogLatestPosts id={blog.id} title={blog.title} information={blog.information}>
    <Fragment slot="bg">
      <div class={blog.bgClass}></div>
    </Fragment>
  </BlogLatestPosts>
</Layout>
