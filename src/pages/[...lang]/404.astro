---
import Layout from '~/layouts/Layout.astro';
import { getHomePermalink } from '~/utils/permalinks';
import type { ContentEntryMap } from "astro:content";
import { getListPage } from "~/utils/lib/contentParser.astro";
import { supportedLang } from "~/utils/lib/languageParser";
import type { MetaData } from '~/types';

export function getStaticPaths() {
  const paths = supportedLang.map((lang) => ({
    params: { lang: lang || undefined },
  }));
  return paths;
}

const { lang } = Astro.params;

const data = await getListPage("notFound", lang as keyof ContentEntryMap);
if (!data || data.length === 0 || !data[0].data) {
  throw new Error("Not Found content not found for language: " + lang);
}


const { metadata, heading, messages, cta } = data[0].data;
const pageMetadata: MetaData = {
  ...metadata,
  robots: {
    index: false,
    follow: false,
  },
};
---
<Layout metadata={pageMetadata}>
  <section class="flex items-center h-full p-16">
    <div class="container flex flex-col items-center justify-center px-5 mx-auto my-8">
      <div class="max-w-md text-center">
        <h2 class="mb-8 font-bold text-9xl">
          <span class="sr-only">{heading.label}</span>
          <span class="text-primary">{heading.code}</span>
        </h2>
        <p class="text-3xl font-semibold md:text-3xl">{messages.primary}</p>
        <p class="mt-4 mb-8 text-lg text-muted">{messages.secondary}</p>
        <a rel="noopener noreferrer" href={getHomePermalink()} class="btn ml-4">{cta.text}</a>
      </div>
    </div>
  </section>
</Layout>
